{"version":3,"sources":["webpack:///./src/components/ventas/Add.vue","webpack:///./src/components/ventas/Add.vue?f0ea","webpack:///./src/components/ventas/Add.vue?92c7","webpack:///./src/components/403.vue","webpack:///./src/components/403.vue?b3b5"],"names":["class","ref","width","multiple","id","data-backdrop","data-keyboard","tabindex","aria-labelledby","style","aria-modal","aria-hidden","for","usuario","rol","grado","findProductos","disabled","stateProductos","tienda","name","ubicaciones","ubicacion","key","value","_id","nombre","autocomplete","type","buscarProducto","productosTrue","item","selectProducto","id_product","descripcion","codigo","inputsAgregar","cantidad","agregarCarrito","productosVenta","producto","index","productName","precio","deleteProduct","producto_id","cancelVenta","preGuardarCompra","modalVenta","newVenta","data-dismiss","aria-label","statusVenta","prestamo","notaVenta","placeholder","cliente","pago","guardarCompra","props","components","NoAccess","setup","store","infoCliente","buscarClientes","productos","state","toast","toask","api","clientes","clientesActivos","total","obj","iva","totalSinIva","a","get","data","dispatch","console","log","length","selectCliente","sendUrl","ruta","warning","verifyStock","ubicacion_id","carrito","filter","toString","generarPdf","nota","credito","render","to","alert","array","i"],"mappings":"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","file":"js/chunk-91cb824c.8f80edd4.js","sourcesContent":["<template>\r\n  <div v-if=\"usuario.rol.grado <= 2\" class=\"container-fluid\">\r\n    <div class=\"text-right\"></div>\r\n    <div class=\"row\">\r\n      <div class=\"col-lg-12\">\r\n        <div class=\"form-group form-floating mb-3 \">\r\n          <label>ubicacion</label>\r\n          <select\r\n            @change=\"findProductos()\"\r\n            id=\"ubicacion\"\r\n            :disabled=\"stateProductos\"\r\n            v-model=\"tienda\"\r\n            name=\"ubicacion\"\r\n            class=\"form-control\"\r\n          >\r\n            <option\r\n              v-for=\"ubicacion in ubicaciones\"\r\n              :key=\"ubicacion\"\r\n              :value=\"ubicacion._id\"\r\n            >\r\n              {{ ubicacion.nombre }}\r\n            </option>\r\n          </select>\r\n        </div>\r\n        <h4 class=\"text-center\">Datos Venta</h4>\r\n        \r\n        <div class=\"table-responsive\">\r\n          <table ref=\"table\" class=\"table table-hover\">\r\n            <thead class=\"thead-dark\">\r\n              <tr>\r\n                <th width=\"100px\">CÃ³digo</th>\r\n                <th>descripcion</th>\r\n                <th>Stock</th>\r\n                <!-- <th width=\"100px\">IVA</th> -->\r\n                <!-- <th class=\"textright\">Precio</th> -->\r\n                <!-- <th class=\"textright\">Precio Total</th> -->\r\n                <th></th>\r\n                <th>Acciones</th>\r\n              </tr>\r\n              <tr>\r\n                <td>\r\n                  <input\r\n                    autocomplete=\"off\"\r\n                    type=\"text\"\r\n                    class=\"form-control form-control-md\"\r\n                    name=\"txt_cod_producto\"\r\n                    id=\"txt_cod_producto\"\r\n                    v-model=\"buscarProducto\"\r\n                  />\r\n                  <div class=\"resultado2\" v-if=\"buscarProducto\">\r\n                    <select multiple class=\"custom-select scrollbar-light-blue\">\r\n                      <option\r\n                        v-for=\"item in productosTrue\"\r\n                        @click=\"selectProducto(item)\"\r\n                        :key=\"item._id\"\r\n                        :value=\"item._id\"\r\n                        v-show=\"\r\n                          item.id_product.codigo\r\n                            .toLowerCase()\r\n                            .indexOf(buscarProducto.toLowerCase()) != -1 ||\r\n                            item.id_product.descripcion\r\n                              .toLowerCase()\r\n                              .indexOf(buscarProducto.toLowerCase()) != -1\r\n                        \"\r\n                      >\r\n                        {{ item.id_product.descripcion }}-{{\r\n                          item.id_product.codigo\r\n                        }}\r\n                      </option>\r\n                    </select>\r\n                  </div>\r\n                </td>\r\n                <td id=\"txt_descripcion\">\r\n                  {{ inputsAgregar.id_product.descripcion }}\r\n                </td>\r\n                <td id=\"txt_existencia\">{{ inputsAgregar.cantidad || 0 }}</td>\r\n\r\n                <td></td>\r\n                <td>\r\n                  <button\r\n                    @click=\"agregarCarrito()\"\r\n                    id=\"add_product_venta\"\r\n                    class=\"btn btn-dark\"\r\n                    v-show=\"cantidad > 0\"\r\n                    :disabled=\"inputsAgregar.cantidad === 0\"\r\n                    v-if=\"inputsAgregar.cantidad\"\r\n                  >\r\n                    Agregar\r\n                  </button>\r\n                </td>\r\n              </tr>\r\n              <tr>\r\n                <th>CÃ³digo</th>\r\n                <th>nombre</th>\r\n                <!-- <th>IMEI</th> -->\r\n                <th>cantidad</th>\r\n                <!-- <th class=\"textright\">Precio</th> -->\r\n                <!-- <th class=\"textright\">Precio Total</th> -->\r\n                <th>precio</th>\r\n                <th>Acciones</th>\r\n              </tr>\r\n            </thead>\r\n\r\n            <tbody id=\"detalle_venta\">\r\n              <tr v-for=\"(producto, index) in productosVenta\" :key=\"index\">\r\n                <th>{{ producto.codigo }}</th>\r\n                <th>{{ producto.productName }}</th>\r\n\r\n                <th>{{ producto.cantidad }}</th>\r\n                <th>\r\n                  <div class=\"d-flex align-items-center\">\r\n                    <input\r\n                      type=\"number\"\r\n                      class=\"form-control mr-2\"\r\n                      style=\"max-width: 100px;\"\r\n                      v-model.number=\"producto.precio\"\r\n                    />\r\n                    = {{ producto.precio * producto.cantidad }}\r\n                  </div>\r\n                </th>\r\n\r\n                <th>\r\n                  <button\r\n                    @click=\"deleteProduct(producto.producto_id)\"\r\n                    class=\"btn btn-danger\"\r\n                  >\r\n                    <i class=\"svg-inline--fa fas fa-trash-alt fa-w-14\"></i>\r\n                    Eliminar\r\n                  </button>\r\n                </th>\r\n              </tr>\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n        <div class=\"col-lg-12 text-center\">\r\n          <label>Acciones</label>\r\n          <div class=\"form-group\">\r\n            <button @click=\"cancelVenta()\" class=\"btn btn-danger mr-2\">\r\n              Anular\r\n            </button>\r\n            <button\r\n              @click=\"preGuardarCompra()\"\r\n              class=\"btn btn-primary\"\r\n              id=\"btn_facturar_venta\"\r\n            >\r\n              <i class=\"fas fa-save\"></i> Generar Venta\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n\r\n  <NoAccess v-else />\r\n  <!-- modal -->\r\n  <!-- Button trigger modal -->\r\n\r\n  <!-- Modal -->\r\n  <div v-if=\"modalVenta\">\r\n    <div\r\n      class=\"modal fade show\"\r\n      id=\"staticBackdrop\"\r\n      data-backdrop=\"static\"\r\n      data-keyboard=\"false\"\r\n      tabindex=\"-1\"\r\n      aria-labelledby=\"staticBackdropLabel\"\r\n      style=\"display: block\"\r\n      aria-modal=\"true\"\r\n    >\r\n      <div class=\"modal-dialog modal-center\">\r\n        <div class=\"modal-content\">\r\n          <div class=\"modal-header\">\r\n            <h5 class=\"modal-title\" id=\"staticBackdropLabel\">Modal title</h5>\r\n            <button\r\n              type=\"button\"\r\n              class=\"close\"\r\n              @click=\"newVenta\"\r\n              data-dismiss=\"modal\"\r\n              aria-label=\"Close\"\r\n            >\r\n              <span aria-hidden=\"true\">&times;</span>\r\n            </button>\r\n          </div>\r\n          <div class=\"modal-body\">\r\n            <div v-if=\"!statusVenta\">\r\n              <div class=\"form-check d-none\">\r\n                <input\r\n                  class=\"form-check-input\"\r\n                  v-model=\"prestamo\"\r\n                  type=\"checkbox\"\r\n                  id=\"defaultCheck1\"\r\n                />\r\n                <label class=\"form-check-label\" for=\"defaultCheck1\">\r\n                  Reportar venta como prestamo\r\n                </label>\r\n              </div>\r\n\r\n              <label for=\"inputNota\"></label>\r\n              <input\r\n                v-model=\"notaVenta\"\r\n                type=\"text\"\r\n                id=\"inputNota\"\r\n                placeholder=\"agregar una nota\"\r\n                class=\"form-control\"\r\n              />\r\n              <input\r\n                v-model=\"cliente\"\r\n                type=\"text\"\r\n                id=\"cliente\"\r\n                placeholder=\"cliente\"\r\n                class=\"form-control mt-4\"\r\n              />\r\n              <input\r\n                v-model=\"pago\"\r\n                type=\"\"\r\n                id=\"\"\r\n                placeholder=\"tipo de pago \"\r\n                class=\"form-control mt-4\"\r\n              />\r\n            </div>\r\n            <div v-if=\"statusVenta\" class=\"text-center\">\r\n              <p>\r\n                <strong class=\"mt-4\">que desea hacer?</strong>\r\n              </p>\r\n              <br />\r\n              <button @click=\"newVenta\" class=\"btn btn-primary mr-2\">\r\n                registrar otra venta\r\n              </button>\r\n              <!-- <button @click=\"generarPdf\" class=\"btn btn-success\">inprimir factura</button> -->\r\n            </div>\r\n          </div>\r\n          <div class=\"modal-footer\">\r\n            <button\r\n              @click=\"newVenta\"\r\n              class=\"btn btn-secondary\"\r\n              data-dismiss=\"modal\"\r\n            >\r\n              Cerrar\r\n            </button>\r\n            <button @click=\"guardarCompra()\" class=\"btn btn-primary\">\r\n              Comprar\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <div class=\"modal-backdrop fade show\"></div>\r\n  </div>\r\n  <!-- modal -->\r\n</template>\r\n\r\n<script>\r\nimport NoAccess from \"../403.vue\";\r\nimport axios from \"axios\";\r\nimport { useStore } from \"vuex\";\r\nimport { computed, ref } from \"@vue/reactivity\";\r\nimport { createToast } from \"mosha-vue-toastify\";\r\nexport default {\r\n  props: [\"param\"],\r\n  components: { NoAccess },\r\n  setup() {\r\n    \r\n    let store = useStore();\r\n    //referencias\r\n    let infoCliente = false;\r\n    let cliente = ref(\"\");\r\n    let modalVenta = ref(false);\r\n    let buscarProducto = ref(\"\");\r\n    let inputsAgregar = ref({ id_product: {} });\r\n    let cantidad = ref(1);\r\n    let buscarClientes = ref(\"\");\r\n    let notaVenta = ref(\"\");\r\n    let pago = ref(\"\");\r\n    let stateProductos = ref(false);\r\n    let tienda = ref();\r\n    let prestamo = ref(false);\r\n    let productos = ref([]);\r\n    //propiedades computadas\r\n    const ubicaciones = computed(() => store.state.ubicaciones);\r\n    let toast = computed(() => store.state.toask);\r\n    let usuario = computed(() => store.state.usuario);\r\n    let productosVenta = computed(() => store.state.productosVenta);\r\n    let statusVenta = computed(() => store.state.statusVenta);\r\n    let api = computed(() => store.state.api);\r\n    let clientes = computed(() => store.state.clientesActivos);\r\n    let productosTrue = computed(() => store.state.productosTrue);\r\n    let total = computed(() => {\r\n      let obj = inputsAgregar.value;\r\n      let iva = ((obj.precio * obj.iva) / 100) * cantidad.value;\r\n      let totalSinIva = obj.precio * cantidad.value;\r\n\r\n      if (!totalSinIva) totalSinIva = 0;\r\n      if (!iva) iva = 0;\r\n\r\n      return totalSinIva + iva;\r\n    });\r\n// funciones automaticas\r\n    store.dispatch(\"getUbicaciones\");\r\n    //funciones\r\n    async function findProductos() {\r\n      const { data } = await axios.get(\r\n        `${api.value}/productos/stock/${tienda.value}`\r\n      );\r\n      productos.value = data;\r\n      store.dispatch(\"getProductosVenta\", data);\r\n      console.log(data.length);\r\n      if (data.length > 0) stateProductos.value = true;\r\n    }\r\n    function newVenta() {\r\n      store.dispatch(\"vaciarVenta\");\r\n      notaVenta.value = \"\";\r\n      cliente.value = \"\";\r\n      pago.value = \"\";\r\n      prestamo.value = false;\r\n      modalVenta.value = false;\r\n      cancelVenta();\r\n    }\r\n    function selectCliente(cliente) {\r\n      buscarClientes.value = \"\";\r\n\r\n      store.dispatch(\"guardarCliente\", cliente);\r\n    }\r\n    const sendUrl = () => {\r\n      const ruta = { ruta: \"/manager/ventas/add\" };\r\n      store.dispatch(\"sendUrl\", ruta);\r\n    };\r\n    function preGuardarCompra() {\r\n      //  if(!dataCliente.value) return createToast('especifique un cliente', toast.value.warning)\r\n      if (productosVenta.value.length == 0)\r\n        return createToast(\r\n          \"no se puede hacer una venta vacia\",\r\n          toast.value.warning\r\n        );\r\n\r\n      modalVenta.value = true;\r\n    }\r\n    function selectProducto(producto) {\r\n      buscarProducto.value = \"\";\r\n      inputsAgregar.value = producto;\r\n    }\r\n    function verifyStock() {\r\n      if (cantidad.value > inputsAgregar.value.cantidad)\r\n        cantidad.value = inputsAgregar.value.cantidad;\r\n    }\r\n    function agregarCarrito() {\r\n      const data = {\r\n        productName: inputsAgregar.value.id_product.descripcion,\r\n\r\n        codigo: inputsAgregar.value.id_product.codigo,\r\n        cantidad: cantidad.value,\r\n        producto_id: inputsAgregar.value.id_product._id,\r\n        ubicacion_id: tienda.value,\r\n      };\r\n      let carrito = productos.value.filter((item) => {\r\n        if (item.id_product._id.toString() == data.producto_id.toString()) {\r\n          let total = item.cantidad - data.cantidad;\r\n          item.cantidad = total;\r\n          if (total >= 0) {\r\n            -item.cantidad;\r\n            return item;\r\n          } else {\r\n            0;\r\n          }\r\n        }\r\n      });\r\n      if (carrito.length > 0) store.dispatch(\"agregarToCarrito\", data);\r\n    }\r\n    function cancelVenta() {\r\n      store.dispatch(\"deleteProccessVenta\");\r\n      inputsAgregar.value = { id_product: {} };\r\n      cantidad.value = 1;\r\n    }\r\n    function deleteProduct(id) {\r\n      store.dispatch(\"deleteStore\", { _id: id });\r\n    }\r\n    function generarPdf() {\r\n      store.dispatch(\"generarPdf\");\r\n    }\r\n    function guardarCompra() {\r\n      // store.dispatch('generarPdf')\r\n      store.dispatch(\"comprar\", {\r\n        cliente: cliente.value,\r\n        nota: notaVenta.value,\r\n        credito: prestamo.value,\r\n        pago: pago.value,\r\n      });\r\n    }\r\n  \r\n\r\n    return {\r\n      productosTrue,\r\n      deleteProduct,\r\n      stateProductos,\r\n      tienda,\r\n      cliente,\r\n      findProductos,\r\n      usuario,\r\n      infoCliente,\r\n      newVenta,\r\n      generarPdf,\r\n      statusVenta,\r\n      prestamo,\r\n      modalVenta,\r\n      notaVenta,\r\n      pago,\r\n      ubicaciones,\r\n      preGuardarCompra,\r\n      guardarCompra,\r\n      cancelVenta,\r\n      agregarCarrito,\r\n      productosVenta,\r\n      verifyStock,\r\n      total,\r\n      cantidad,\r\n      inputsAgregar,\r\n      selectProducto,\r\n      buscarProducto,\r\n      sendUrl,\r\n      selectCliente,\r\n      productos,\r\n      buscarClientes,\r\n      clientes,\r\n    };\r\n  },\r\n};\r\n</script>\r\n\r\n<style>\r\n.resultado {\r\n  background: #ececec;\r\n  position: absolute;\r\n  z-index: 150;\r\n  border-radius: 0.5rem;\r\n  width: 85%;\r\n  max-height: 30vh;\r\n}\r\n\r\n.resultado2 {\r\n  background: #ececec;\r\n  position: absolute;\r\n  z-index: 150;\r\n  border-radius: 0.5rem;\r\n  width: 20%;\r\n  max-height: 30vh;\r\n}\r\n@media screen and (max-width: 500px) {\r\n  .resultado2 {\r\n    background: #ececec;\r\n    position: absolute;\r\n    z-index: 150;\r\n    border-radius: 0.5rem;\r\n    width: 55%;\r\n    max-height: 30vh;\r\n  }\r\n}\r\n.scrollbar-light-blue::-webkit-scrollbar-track {\r\n  -webkit-box-shadow: inset 0 0 6px rgba(0, 0, 0, 0.1);\r\n  background-color: #f5f5f5;\r\n  border-radius: 5px;\r\n}\r\n\r\n.scrollbar-light-blue::-webkit-scrollbar {\r\n  width: 10px;\r\n  background-color: #f5f5f5;\r\n}\r\n\r\n.scrollbar-light-blue::-webkit-scrollbar-thumb {\r\n  border-radius: 5px;\r\n  -webkit-box-shadow: inset 0 0 6px rgba(0, 0, 0, 0.1);\r\n  background-color: #4e73df;\r\n}\r\n</style>\r\n","import { render } from \"./Add.vue?vue&type=template&id=e0b71d12\"\nimport script from \"./Add.vue?vue&type=script&lang=js\"\nexport * from \"./Add.vue?vue&type=script&lang=js\"\n\nimport \"./Add.vue?vue&type=style&index=0&id=e0b71d12&lang=css\"\nscript.render = render\n\nexport default script","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Add.vue?vue&type=style&index=0&id=e0b71d12&lang=css\"","<template>\r\n    <div  style=\"height: 70vh\" id=\"layoutError\">\r\n            <div id=\"layoutError_content\">\r\n                <main>\r\n                    <div class=\"container\">\r\n                        <div class=\"row mt-5 justify-content-center\">\r\n                            <div class=\"col-lg-6\">\r\n                                <div class=\"text-center mt-4\">\r\n                                    <h1 class=\"display-1\">403</h1>\r\n                                    <p class=\"lead\">sin autorizacion</p>\r\n                                    <p>su acceso a esta area no esta permitido.</p>\r\n                                    <router-link to=\"/\">\r\n                                        <i class=\"fas fa-arrow-left me-1\"></i>\r\n                                        regresar al inicio\r\n                                    </router-link>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </main>\r\n            </div>\r\n           \r\n        </div>\r\n        <button @click=\"alert\"></button>\r\n</template>\r\n<script>\r\nexport default {\r\n    setup(){\r\n        function alert() {\r\n          let  array = 40000\r\n            for (let i = 0; i < array; i++) {\r\n               console.log('hola')\r\n                \r\n            }\r\n        }\r\n        return{alert}\r\n    }\r\n}\r\n</script>","import { render } from \"./403.vue?vue&type=template&id=83dfd1ea\"\nimport script from \"./403.vue?vue&type=script&lang=js\"\nexport * from \"./403.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script"],"sourceRoot":""}